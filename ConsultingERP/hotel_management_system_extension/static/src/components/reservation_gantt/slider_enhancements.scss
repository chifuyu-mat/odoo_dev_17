// =============================================================================
// ESTILOS GLOBALES PARA EL SLIDER - COMPLEMENTO PROFESIONAL MEJORADO
// =============================================================================

// Clase global cuando se está arrastrando el slider
body.slider-dragging {
    cursor: grabbing !important;
    user-select: none;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    
    * {
        cursor: grabbing !important;
    }
    
    // Deshabilitar transiciones del gantt durante el arrastre para mejor performance
    .gantt-container {
        transition: none !important;
    }
    
    // Efecto de pulso en el contenedor durante el arrastre
    .gantt-continuous-slider {
        transform: scale(1.02);
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);
    }
}

// Mejoras de transición para el contenedor del gantt
.gantt-container {
    will-change: transform;
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
    transition: transform 0.1s ease;
    
    // Efecto de scroll progresivo
    &.progressive-scroll {
        transition: transform 0.1s ease;
        
        .gantt_header_days {
            transition: all 0.2s ease;
        }
        
        .gantt_row {
            transition: all 0.2s ease;
        }
    }
    
    // Indicador visual de transición de mes
    &.month-transition {
        position: relative;
        
        &::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, 
                transparent 0%, 
                rgba(0, 123, 255, 0.1) 50%, 
                transparent 100%);
            pointer-events: none;
            z-index: 10;
            animation: monthTransitionGlow 0.5s ease-in-out;
        }
    }
    
    // Track deslizante de 2 panes (actual + preview)
    .gantt-track {
        display: flex;
        width: 200%;
        transform: translateX(0);
        transition: transform 300ms ease;
        will-change: transform;
    }
    
    .gantt-pane {
        flex: 0 0 100%;
        width: 100%;
    }
    
    .gantt-pane.preview {
        pointer-events: none; // evita interacciones en el preview
    }
    
    .gantt-pane.preview .gantt_row_content {
        opacity: 0.6;
    }
    
    &.slider-animating {
        transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
    }
}

// Animación de resplandor durante transición de mes
@keyframes monthTransitionGlow {
    0% { opacity: 0; }
    50% { opacity: 1; }
    100% { opacity: 0; }
}

// Estilos para días híbridos (mes actual + siguiente)
.gantt_header_days {
    .day_cell.hybrid-day {
        background: linear-gradient(135deg, 
            rgba(0, 123, 255, 0.1) 0%, 
            rgba(0, 123, 255, 0.05) 100%);
        border-left: 2px solid rgba(0, 123, 255, 0.3);
        position: relative;
        
        &::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, 
                transparent 0%, 
                rgba(0, 123, 255, 0.1) 50%, 
                transparent 100%);
            animation: hybridDayPulse 2s ease-in-out infinite;
        }
    }
}

@keyframes hybridDayPulse {
    0%, 100% { opacity: 0.3; }
    50% { opacity: 0.7; }
}

// =============================================================================
// ESTILOS PARA CAMBIO DE HABITACIÓN - HOVER MEJORADO
// =============================================================================

// Resaltado de barras con cambio de habitación
.gantt_reservation_bar.room-change-highlight {
    position: relative;
    z-index: 100;
    
    // Efecto de resplandor
    box-shadow: 
        0 0 0 3px rgba(255, 107, 53, 0.3),
        0 0 20px rgba(255, 107, 53, 0.4),
        0 4px 15px rgba(0, 0, 0, 0.2);
    
    // Animación de pulso
    animation: roomChangePulse 1.5s ease-in-out infinite;
    
    // Borde destacado
    border: 2px solid #ff6b35;
    border-radius: 8px;
    
    // Transformación sutil
    transform: scale(1.02);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    
    // Efecto de brillo interno
    &::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(45deg, 
            rgba(255, 107, 53, 0.1) 0%, 
            rgba(255, 107, 53, 0.2) 50%, 
            rgba(255, 107, 53, 0.1) 100%);
        border-radius: 6px;
        pointer-events: none;
        animation: roomChangeShimmer 2s ease-in-out infinite;
    }
    
    // Contenido de la barra
    .gantt_reservation_content {
        position: relative;
        z-index: 2;
        color: #ffffff;
        font-weight: 600;
        text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
    }
}

// Animación de pulso para cambio de habitación
@keyframes roomChangePulse {
    0%, 100% { 
        box-shadow: 
            0 0 0 3px rgba(255, 107, 53, 0.3),
            0 0 20px rgba(255, 107, 53, 0.4),
            0 4px 15px rgba(0, 0, 0, 0.2);
    }
    50% { 
        box-shadow: 
            0 0 0 5px rgba(255, 107, 53, 0.5),
            0 0 30px rgba(255, 107, 53, 0.6),
            0 6px 20px rgba(0, 0, 0, 0.3);
    }
}

// Animación de brillo interno
@keyframes roomChangeShimmer {
    0%, 100% { opacity: 0.3; }
    50% { opacity: 0.7; }
}

// Indicador de conexión entre barras
.room-change-connector {
    animation: connectorBounce 1s ease-in-out infinite;
    
    // Efecto de hover en el indicador
    &:hover {
        transform: scale(1.2);
        background: #ff8c42 !important;
        box-shadow: 0 4px 8px rgba(255, 107, 53, 0.4);
    }
}

// Animación de rebote para el indicador
@keyframes connectorBounce {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-2px); }
}

// Efecto de conexión visual entre barras relacionadas
.gantt_reservation_bar.room-change-highlight + .gantt_reservation_bar.room-change-highlight {
    // Línea conectora entre barras relacionadas
    &::after {
        content: '';
        position: absolute;
        top: 50%;
        left: -10px;
        width: 20px;
        height: 2px;
        background: linear-gradient(90deg, #ff6b35, #ff8c42);
        transform: translateY(-50%);
        z-index: 99;
        animation: connectionFlow 2s ease-in-out infinite;
    }
}

// Animación de flujo de conexión
@keyframes connectionFlow {
    0%, 100% { 
        opacity: 0.6;
        transform: translateY(-50%) scaleX(1);
    }
    50% { 
        opacity: 1;
        transform: translateY(-50%) scaleX(1.1);
    }
}

// Estados específicos para cambio de habitación
.gantt_reservation_bar.room-change-highlight {
    // Estado de origen del cambio
    &.room-change-origin {
        border-left: 4px solid #ff6b35;
        background: linear-gradient(90deg, #ff6b35, #ff8c42);
    }
    
    // Estado de destino del cambio
    &.room-change-destination {
        border-right: 4px solid #ff6b35;
        background: linear-gradient(90deg, #ff8c42, #ff6b35);
    }
    
    // Estado de transición
    &.room-change-transition {
        background: linear-gradient(45deg, #ff6b35, #ff8c42, #ff6b35);
        background-size: 200% 200%;
        animation: roomChangeGradient 3s ease-in-out infinite;
    }
}

// Animación de gradiente para transición
@keyframes roomChangeGradient {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
}

// Indicadores visuales de snap points en el slider
.gantt-continuous-slider {
    position: relative;
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(248, 249, 250, 0.9));
    border: 1px solid rgba(0, 0, 0, 0.1);
    border-radius: 12px;
    padding: 16px 20px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
    backdrop-filter: blur(10px);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    
    &:hover {
        box-shadow: 0 6px 25px rgba(0, 0, 0, 0.12);
        transform: translateY(-1px);
    }
    
    .slider-container {
        position: relative;
        width: 100%;
    }
    
    .slider-track {
        position: relative;
        height: 8px;
        background: linear-gradient(90deg, 
            rgba(0, 123, 255, 0.1) 0%, 
            rgba(0, 123, 255, 0.2) 50%, 
            rgba(0, 123, 255, 0.1) 100%);
        border-radius: 4px;
        cursor: pointer;
        transition: all 0.2s ease;
        
        &:hover {
            height: 10px;
            background: linear-gradient(90deg, 
                rgba(0, 123, 255, 0.15) 0%, 
                rgba(0, 123, 255, 0.25) 50%, 
                rgba(0, 123, 255, 0.15) 100%);
        }
        
        // Marcadores de snap points mejorados
        &::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 25%;
            width: 3px;
            height: 16px;
            background: linear-gradient(180deg, rgba(0, 123, 255, 0.3), rgba(0, 123, 255, 0.6));
            transform: translateY(-50%);
            border-radius: 2px;
            box-shadow: 0 2px 4px rgba(0, 123, 255, 0.2);
        }
        
        &::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 75%;
            width: 3px;
            height: 16px;
            background: linear-gradient(180deg, rgba(0, 123, 255, 0.3), rgba(0, 123, 255, 0.6));
            transform: translateY(-50%);
            border-radius: 2px;
            box-shadow: 0 2px 4px rgba(0, 123, 255, 0.2);
        }
        
        // Marcador central más prominente
        .slider-center-marker {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 4px;
            height: 20px;
            background: linear-gradient(180deg, #007bff, #0056b3);
            transform: translate(-50%, -50%);
            border-radius: 2px;
            box-shadow: 0 3px 6px rgba(0, 123, 255, 0.3);
            z-index: 1;
        }
    }
    
    .slider-fill {
        height: 100%;
        background: linear-gradient(90deg, 
            rgba(0, 123, 255, 0.3) 0%, 
            rgba(0, 123, 255, 0.5) 50%, 
            rgba(0, 123, 255, 0.3) 100%);
        border-radius: 4px;
        transition: all 0.2s ease;
        box-shadow: inset 0 1px 2px rgba(0, 123, 255, 0.2);
    }
    
    .slider-thumb {
        position: absolute;
        top: 50%;
        width: 20px;
        height: 20px;
        background: linear-gradient(135deg, #007bff, #0056b3);
        border: 3px solid #ffffff;
        border-radius: 50%;
        transform: translate(-50%, -50%);
        cursor: grab;
        transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        box-shadow: 0 4px 12px rgba(0, 123, 255, 0.3);
        z-index: 10;
        
        &:hover {
            transform: translate(-50%, -50%) scale(1.1);
            box-shadow: 0 6px 16px rgba(0, 123, 255, 0.4);
        }
        
        &:active,
        &.dragging {
            cursor: grabbing;
            transform: translate(-50%, -50%) scale(1.15);
            box-shadow: 0 8px 20px rgba(0, 123, 255, 0.5);
        }
        
        // Indicador de posición
        &::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 6px;
            height: 6px;
            background: #ffffff;
            border-radius: 50%;
            transform: translate(-50%, -50%);
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
        }
    }
    
    .slider-labels {
        display: flex;
        justify-content: space-between;
        margin-top: 12px;
        font-size: 12px;
        font-weight: 500;
        color: #6c757d;
        
        .slider-label-left,
        .slider-label-right {
            padding: 4px 8px;
            background: rgba(0, 123, 255, 0.1);
            border-radius: 6px;
            transition: all 0.2s ease;
        }
        
        .slider-label-left:hover,
        .slider-label-right:hover {
            background: rgba(0, 123, 255, 0.15);
            color: #007bff;
        }
    }
}

// Animación de entrada para el slider
@keyframes sliderFadeIn {
    from {
        opacity: 0;
        transform: translateY(-10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.gantt-continuous-slider {
    animation: sliderFadeIn 0.5s cubic-bezier(0.4, 0, 0.2, 1);
}

// Feedback visual cuando se alcanza un umbral de cambio de mes
.slider-thumb {
    &[data-threshold="reached"] {
        border-color: #4CAF50 !important;
        box-shadow: 0 0 0 4px rgba(76, 175, 80, 0.2),
                    0 8px 20px rgba(0, 0, 0, 0.3) !important;
    }
}

// Mejora de accesibilidad - focus visible
.slider-track:focus,
.slider-thumb:focus {
    outline: 2px solid rgba(0, 123, 255, 0.5);
    outline-offset: 2px;
}

// =============================================================================
// FEEDBACK HÁPTICO Y SONORO
// =============================================================================

// Efectos de vibración para dispositivos táctiles
@keyframes hapticFeedback {
    0%, 100% { transform: translate(-50%, -50%) scale(1); }
    50% { transform: translate(-50%, -50%) scale(1.05); }
}

.slider-thumb.haptic-feedback {
    animation: hapticFeedback 0.1s ease-in-out;
}

// Efectos de sonido visual (ondas de sonido)
@keyframes soundWave {
    0% { 
        opacity: 1; 
        transform: translate(-50%, -50%) scale(1); 
    }
    100% { 
        opacity: 0; 
        transform: translate(-50%, -50%) scale(2); 
    }
}

.slider-thumb.sound-feedback::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 20px;
    height: 20px;
    border: 2px solid rgba(0, 123, 255, 0.6);
    border-radius: 50%;
    animation: soundWave 0.3s ease-out;
    pointer-events: none;
}

// =============================================================================
// MEJORAS DE ACCESIBILIDAD
// =============================================================================

// Indicadores de foco mejorados
.slider-track:focus-visible,
.slider-thumb:focus-visible {
    outline: 3px solid rgba(0, 123, 255, 0.6);
    outline-offset: 2px;
    box-shadow: 0 0 0 6px rgba(0, 123, 255, 0.2);
}

// Estados de alta contraste
@media (prefers-contrast: high) {
    .gantt-continuous-slider {
        border: 2px solid #000000;
        
        .slider-track {
            background: #ffffff;
            border: 1px solid #000000;
        }
        
        .slider-thumb {
            background: #000000;
            border: 2px solid #ffffff;
        }
        
        .slider-labels {
            color: #000000;
            font-weight: bold;
        }
    }
}

// Reducción de movimiento para usuarios sensibles
@media (prefers-reduced-motion: reduce) {
    .gantt-continuous-slider,
    .slider-thumb,
    .slider-fill {
        transition: none !important;
        animation: none !important;
    }
    
    .slider-thumb.haptic-feedback {
        animation: none !important;
    }
}

// =============================================================================
// INDICADORES DE PROGRESO AVANZADOS
// =============================================================================

// Barra de progreso con gradiente animado
.slider-fill.animated {
    background: linear-gradient(90deg, 
        rgba(0, 123, 255, 0.3) 0%, 
        rgba(0, 123, 255, 0.5) 25%,
        rgba(0, 123, 255, 0.7) 50%,
        rgba(0, 123, 255, 0.5) 75%,
        rgba(0, 123, 255, 0.3) 100%);
    background-size: 200% 100%;
    animation: gradientShift 2s ease-in-out infinite;
}

@keyframes gradientShift {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
}

// Indicador de umbral alcanzado
.slider-thumb[data-threshold="reached"] {
    border-color: #28a745 !important;
    box-shadow: 0 0 0 4px rgba(40, 167, 69, 0.2),
                0 8px 20px rgba(0, 0, 0, 0.3) !important;
    
    &::before {
        background: #28a745;
        animation: pulse 0.6s ease-in-out;
    }
}

// Transición de mes mejorada
.slider-thumb.month-transition {
    transform: translate(-50%, -50%) scale(1.2);
    background: linear-gradient(135deg, #ff6b35, #ff8c42);
    border-color: #ffffff;
    box-shadow: 0 0 0 6px rgba(255, 107, 53, 0.3),
                0 10px 25px rgba(255, 107, 53, 0.4);
    
    &::before {
        background: #ffffff;
        animation: monthTransitionPulse 0.3s ease-in-out;
    }
}

@keyframes monthTransitionPulse {
    0%, 100% { transform: translate(-50%, -50%) scale(1); }
    50% { transform: translate(-50%, -50%) scale(1.3); }
}

@keyframes pulse {
    0%, 100% { transform: translate(-50%, -50%) scale(1); }
    50% { transform: translate(-50%, -50%) scale(1.2); }
}

// =============================================================================
// CONTROLES DE TECLADO
// =============================================================================

.slider-track.keyboard-navigation {
    .slider-thumb {
        outline: 3px solid rgba(0, 123, 255, 0.8);
        outline-offset: 3px;
    }
}

// =============================================================================
// MODO OSCURO MEJORADO
// =============================================================================

@media (prefers-color-scheme: dark) {
    .gantt-continuous-slider {
        background: linear-gradient(135deg, rgba(30, 30, 32, 0.95), rgba(40, 40, 42, 0.9));
        border-color: rgba(100, 100, 100, 0.5);
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        
        .slider-track {
            background: linear-gradient(90deg, 
                rgba(100, 100, 100, 0.2) 0%, 
                rgba(120, 120, 120, 0.3) 50%, 
                rgba(100, 100, 100, 0.2) 100%);
        }
        
        .slider-thumb {
            background: linear-gradient(135deg, #4a9eff, #0066cc);
            border-color: #ffffff;
        }
        
        .slider-labels {
            color: #b0b0b0;
        }
        
        .slider-fill {
            background: linear-gradient(90deg, 
                rgba(74, 158, 255, 0.3) 0%, 
                rgba(74, 158, 255, 0.5) 50%, 
                rgba(74, 158, 255, 0.3) 100%);
        }
    }
}
